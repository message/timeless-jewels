var Pl=Object.defineProperty;var Ml=(t,e,l)=>e in t?Pl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Ee=(t,e,l)=>(Ml(t,typeof e!="symbol"?e+"":e,l),l);import{S as st,i as it,s as nt,C as _t,k as E,a as U,l as T,m as R,h as v,c as B,n as k,p as He,b as J,N as M,R as bt,T as Te,D as gt,E as pt,F as vt,g as Y,d as Q,P as We,U as zl,o as vl,V as At,W as Cl,X,w as tt,H as Ge,Y as bl,e as ke,v as Ve,f as Je,I as wl,Z as Sl,y as je,z as qe,A as Fe,G as p,B as Ue,q as j,r as q,u as Ae,Q as lt,_ as Ll,$ as Nl,O as Qe,a0 as we,J as Rt,L as Pt,M as Ze}from"../chunks/index.a7675b96.js";import{r as Ol,h as Dl}from"../chunks/singletons.87e777e4.js";import{b as Vl,a as Ye,d as yt,t as Mt,c as et,o as zt,e as wt,f as Et,i as Ct,g as Lt,h as Jl,j as Nt,k as kl,m as ut,n as jl,s as ql,p as Fl}from"../chunks/worker.7d30a503.js";import{c as Il,d as te}from"../chunks/index.098253ec.js";import{g as Ul,S as kt}from"../chunks/navigation.ecd65ec3.js";import{p as Bl}from"../chunks/stores.4c80c737.js";class Hl{constructor(){Ee(this,"currentLayerId");Ee(this,"setups");Ee(this,"renderers");Ee(this,"dispatchers");Ee(this,"needsSetup");Ee(this,"needsRedraw");Ee(this,"context");Ee(this,"width");Ee(this,"height");Ee(this,"autoclear");Ee(this,"pixelRatio");Ee(this,"renderLoop");Ee(this,"layerObserver");Ee(this,"layerRef");Ee(this,"layerSequence");Ee(this,"renderingLayerId");Ee(this,"activeLayerId");Ee(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:l,dispatcher:i}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,l),this.dispatchers.set(this.currentLayerId,i),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,l){this.context=e,this.layerRef=l,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(l=>+(l.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var s;const e=this.context,l=this.width,i=this.height,n=this.pixelRatio;if(this.needsSetup){for(const[r,c]of this.setups)c({context:e,width:l,height:i}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(n,0,0,n,0,0),this.autoclear&&e.clearRect(0,0,l,i);for(const r of this.layerSequence)this.renderingLayerId=r,(s=this.renderers.get(r))==null||s({context:e,width:l,height:i});this.needsRedraw=!1}}setActiveLayer(e,l){this.activeLayerId!==e&&(l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",l)),this.dispatchLayerEvent(new MouseEvent("mouseleave",l))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",l)),this.dispatchLayerEvent(new MouseEvent("mouseenter",l))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:l,top:i}=e.target.getBoundingClientRect(),{clientX:n,clientY:s}=e.changedTouches[0],r={x:n-l,y:s-i,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const l={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,l)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const Yl=t=>{const e=t*2,l=e>>16&255,i=e>>8&255,n=e&255;return`rgb(${l}, ${i}, ${n})`},Kl=(t,e,l)=>{const i=(t<<16|e<<8|l)/2;return i%1?0:i},Xl=["drawImage"],Gl=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],Wl=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Ql=t=>{let e;const l=document.createElement("canvas"),i=l.getContext("2d",{willReadFrequently:!0}),n=()=>{l.width=t.canvas.width,l.height=t.canvas.height};return new MutationObserver(n).observe(t.canvas,{attributeFilter:["width","height"]}),n(),new Proxy(t,{get(r,c){if(c==="_getLayerIdAtPixel")return(a,h)=>{const[_,d,g]=i.getImageData(a,h,1,1).data;return Kl(_,d,g)};const o=r[c];return typeof o!="function"?o:function(...a){if(Wl.includes(c)){const h=Yl(e());i.fillStyle=h,i.strokeStyle=h}if(c==="drawImage"){const h=a.slice(1);i.fillRect(...h)}return Xl.includes(c)||Reflect.apply(o,i,a),Reflect.apply(o,r,a)}},set(r,c,o){return c==="_renderingLayerId"?(e=o,!0):(r[c]=o,Gl.includes(c)||(i[c]=o),!0)}})};function Zl(t){let e,l,i,n=`${t[0]}px`,s=`${t[1]}px`,r,c,o,a,h;const _=t[18].default,d=_t(_,t,t[17],null);return{c(){e=E("canvas"),r=U(),c=E("div"),d&&d.c(),this.h()},l(g){e=T(g,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),R(e).forEach(v),r=B(g),c=T(g,"DIV",{});var u=R(c);d&&d.l(u),u.forEach(v),this.h()},h(){k(e,"width",l=t[0]*t[5]),k(e,"height",i=t[1]*t[5]),k(e,"class",t[4]),k(e,"style",t[2]),He(e,"display","block"),He(e,"width",n),He(e,"height",s),He(c,"display","none")},m(g,u){J(g,e,u),t[64](e),J(g,r,u),J(g,c,u),d&&d.m(c,null),t[65](c),o=!0,a||(h=[M(e,"touchstart",bt(function(){Te(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),M(e,"mousemove",function(){Te(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),M(e,"pointermove",function(){Te(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),M(e,"click",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"contextmenu",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"dblclick",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mousedown",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mouseenter",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mouseleave",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mouseup",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"wheel",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"touchcancel",bt(function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),M(e,"touchend",bt(function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),M(e,"touchmove",bt(function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),M(e,"pointerenter",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointerleave",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointerdown",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointerup",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointercancel",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"focus",t[19]),M(e,"blur",t[20]),M(e,"fullscreenchange",t[21]),M(e,"fullscreenerror",t[22]),M(e,"scroll",t[23]),M(e,"cut",t[24]),M(e,"copy",t[25]),M(e,"paste",t[26]),M(e,"keydown",t[27]),M(e,"keypress",t[28]),M(e,"keyup",t[29]),M(e,"auxclick",t[30]),M(e,"click",t[31]),M(e,"contextmenu",t[32]),M(e,"dblclick",t[33]),M(e,"mousedown",t[34]),M(e,"mouseenter",t[35]),M(e,"mouseleave",t[36]),M(e,"mousemove",t[37]),M(e,"mouseover",t[38]),M(e,"mouseout",t[39]),M(e,"mouseup",t[40]),M(e,"select",t[41]),M(e,"wheel",t[42]),M(e,"drag",t[43]),M(e,"dragend",t[44]),M(e,"dragenter",t[45]),M(e,"dragstart",t[46]),M(e,"dragleave",t[47]),M(e,"dragover",t[48]),M(e,"drop",t[49]),M(e,"touchcancel",t[50]),M(e,"touchend",t[51]),M(e,"touchmove",t[52]),M(e,"touchstart",t[53]),M(e,"pointerover",t[54]),M(e,"pointerenter",t[55]),M(e,"pointerdown",t[56]),M(e,"pointermove",t[57]),M(e,"pointerup",t[58]),M(e,"pointercancel",t[59]),M(e,"pointerout",t[60]),M(e,"pointerleave",t[61]),M(e,"gotpointercapture",t[62]),M(e,"lostpointercapture",t[63])],a=!0)},p(g,u){t=g,(!o||u[0]&33&&l!==(l=t[0]*t[5]))&&k(e,"width",l),(!o||u[0]&34&&i!==(i=t[1]*t[5]))&&k(e,"height",i),(!o||u[0]&16)&&k(e,"class",t[4]),(!o||u[0]&4)&&k(e,"style",t[2]);const f=u[0]&4;f&&He(e,"display","block"),(f||u[0]&5&&n!==(n=`${t[0]}px`))&&He(e,"width",n),(f||u[0]&6&&s!==(s=`${t[1]}px`))&&He(e,"height",s),d&&d.p&&(!o||u[0]&131072)&&gt(d,_,t,t[17],o?vt(_,t[17],u,null):pt(t[17]),null)},i(g){o||(Y(d,g),o=!0)},o(g){Q(d,g),o=!1},d(g){g&&v(e),t[64](null),g&&v(r),g&&v(c),d&&d.d(g),t[65](null),a=!1,We(h)}}}const yl=Symbol(),xl=()=>Cl(yl);function $l(t,e,l){let i,{$$slots:n={},$$scope:s}=e,{width:r=640,height:c=640,pixelRatio:o=null,style:a="",autoclear:h=!0,layerEvents:_=!1}=e,{class:d=""}=e,g,u=null,f;const m=new Hl;function S(){m.redraw()}function y(){return g}function N(){return u}o==null&&(typeof window<"u"?o=window.devicePixelRatio:o=2),zl(yl,{register:m.register,unregister:m.unregister,redraw:m.redraw}),vl(()=>{const w=g.getContext("2d");_?(u=Ql(w),u._renderingLayerId=m.getRenderingLayerId):u=w,m.setup(u,f)}),At(()=>m.destroy());const L=w=>{const ht=w.offsetX*i,dt=w.offsetY*i,I=u._getLayerIdAtPixel(ht,dt);m.setActiveLayer(I,w),m.dispatchLayerEvent(w)},z=w=>{const{clientX:ht,clientY:dt}=w.changedTouches[0],{left:I,top:ee}=g.getBoundingClientRect(),be=(ht-I)*i,Se=(dt-ee)*i,ge=u._getLayerIdAtPixel(be,Se);m.setActiveLayer(ge,w),m.dispatchLayerEvent(w)},P=w=>{window.TouchEvent&&w instanceof TouchEvent&&w.preventDefault(),m.dispatchLayerEvent(w)};function A(w){X.call(this,t,w)}function C(w){X.call(this,t,w)}function D(w){X.call(this,t,w)}function V(w){X.call(this,t,w)}function H(w){X.call(this,t,w)}function K(w){X.call(this,t,w)}function G(w){X.call(this,t,w)}function he(w){X.call(this,t,w)}function pe(w){X.call(this,t,w)}function ae(w){X.call(this,t,w)}function Z(w){X.call(this,t,w)}function Re(w){X.call(this,t,w)}function Ie(w){X.call(this,t,w)}function de(w){X.call(this,t,w)}function F(w){X.call(this,t,w)}function ne(w){X.call(this,t,w)}function re(w){X.call(this,t,w)}function O(w){X.call(this,t,w)}function b(w){X.call(this,t,w)}function ie(w){X.call(this,t,w)}function le(w){X.call(this,t,w)}function se(w){X.call(this,t,w)}function me(w){X.call(this,t,w)}function $(w){X.call(this,t,w)}function ve(w){X.call(this,t,w)}function _e(w){X.call(this,t,w)}function Ne(w){X.call(this,t,w)}function oe(w){X.call(this,t,w)}function W(w){X.call(this,t,w)}function x(w){X.call(this,t,w)}function ue(w){X.call(this,t,w)}function fe(w){X.call(this,t,w)}function Ce(w){X.call(this,t,w)}function ze(w){X.call(this,t,w)}function Ke(w){X.call(this,t,w)}function ce(w){X.call(this,t,w)}function ye(w){X.call(this,t,w)}function Be(w){X.call(this,t,w)}function Oe(w){X.call(this,t,w)}function Me(w){X.call(this,t,w)}function Le(w){X.call(this,t,w)}function rt(w){X.call(this,t,w)}function ft(w){X.call(this,t,w)}function ct(w){X.call(this,t,w)}function ot(w){X.call(this,t,w)}function at(w){tt[w?"unshift":"push"](()=>{g=w,l(6,g)})}function It(w){tt[w?"unshift":"push"](()=>{f=w,l(7,f)})}return t.$$set=w=>{"width"in w&&l(0,r=w.width),"height"in w&&l(1,c=w.height),"pixelRatio"in w&&l(11,o=w.pixelRatio),"style"in w&&l(2,a=w.style),"autoclear"in w&&l(12,h=w.autoclear),"layerEvents"in w&&l(3,_=w.layerEvents),"class"in w&&l(4,d=w.class),"$$scope"in w&&l(17,s=w.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&l(5,i=o??1),t.$$.dirty[0]&1&&l(16,m.width=r,m),t.$$.dirty[0]&2&&l(16,m.height=c,m),t.$$.dirty[0]&32&&l(16,m.pixelRatio=i,m),t.$$.dirty[0]&4096&&l(16,m.autoclear=h,m),t.$$.dirty[0]&71683&&m.redraw()},[r,c,a,_,d,i,g,f,L,z,P,o,h,S,y,N,m,s,n,A,C,D,V,H,K,G,he,pe,ae,Z,Re,Ie,de,F,ne,re,O,b,ie,le,se,me,$,ve,_e,Ne,oe,W,x,ue,fe,Ce,ze,Ke,ce,ye,Be,Oe,Me,Le,rt,ft,ct,ot,at,It]}class es extends st{constructor(e){super(),it(this,e,$l,Zl,nt,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function ts(t){let e;return{c(){e=E("div"),this.h()},l(l){e=T(l,"DIV",{"data-layer-id":!0}),R(e).forEach(v),this.h()},h(){k(e,"data-layer-id",t[0])},m(l,i){J(l,e,i)},p:Ge,i:Ge,o:Ge,d(l){l&&v(e)}}}function ls(t,e,l){const{register:i,unregister:n,redraw:s}=xl(),r=bl();let{setup:c=void 0}=e,{render:o=()=>{}}=e;const a=i({setup:c,render:o,dispatcher:r});return At(()=>n(a)),t.$$set=h=>{"setup"in h&&l(1,c=h.setup),"render"in h&&l(2,o=h.render)},t.$$.update=()=>{t.$$.dirty&4&&s()},[a,c,o]}class ss extends st{constructor(e){super(),it(this,e,ls,ts,nt,{setup:1,render:2})}}let Ot;const El=Date.now(),Tl=t=>(t(Date.now()-El),Ot=window.requestAnimationFrame(()=>Tl(t)),()=>window.cancelAnimationFrame(Ot));function is(){}const ns=Ol(Date.now()-El,typeof window>"u"?is:Tl),{window:Tt}=Sl;function Dt(t){let e,l,i,n,s,r;l=new es({props:{width:t[0],height:t[1],$$slots:{default:[rs]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[5]),l.$on("wheel",t[8]);const c=t[26].default,o=_t(c,t,t[27],null);return{c(){e=E("div"),je(l.$$.fragment),i=U(),o&&o.c(),this.h()},l(a){e=T(a,"DIV",{style:!0});var h=R(e);qe(l.$$.fragment,h),i=B(h),o&&o.l(h),h.forEach(v),this.h()},h(){He(e,"touch-action","none"),He(e,"cursor",t[2])},m(a,h){J(a,e,h),Fe(l,e,null),p(e,i),o&&o.m(e,null),n=!0,s||(r=M(e,"resize",t[9]),s=!0)},p(a,h){const _={};h[0]&1&&(_.width=a[0]),h[0]&2&&(_.height=a[1]),h[0]&134217736&&(_.$$scope={dirty:h,ctx:a}),l.$set(_),o&&o.p&&(!n||h[0]&134217728)&&gt(o,c,a,a[27],n?vt(c,a[27],h,null):pt(a[27]),null),(!n||h[0]&4)&&He(e,"cursor",a[2])},i(a){n||(Y(l.$$.fragment,a),Y(o,a),n=!0)},o(a){Q(l.$$.fragment,a),Q(o,a),n=!1},d(a){a&&v(e),Ue(l),o&&o.d(a),s=!1,r()}}}function rs(t){let e,l;return e=new ss({props:{render:t[3]}}),{c(){je(e.$$.fragment)},l(i){qe(e.$$.fragment,i)},m(i,n){Fe(e,i,n),l=!0},p(i,n){const s={};n[0]&8&&(s.render=i[3]),e.$set(s)},i(i){l||(Y(e.$$.fragment,i),l=!0)},o(i){Q(e.$$.fragment,i),l=!1},d(i){Ue(e,i)}}}function os(t){let e,l,i,n,s=t[0]&&t[1]&&Dt(t);return{c(){s&&s.c(),e=ke()},l(r){s&&s.l(r),e=ke()},m(r,c){s&&s.m(r,c),J(r,e,c),l=!0,i||(n=[M(Tt,"pointerup",t[6]),M(Tt,"pointermove",t[7]),M(Tt,"resize",t[9])],i=!0)},p(r,c){r[0]&&r[1]?s?(s.p(r,c),c[0]&3&&Y(s,1)):(s=Dt(r),s.c(),Y(s,1),s.m(e.parentNode,e)):s&&(Ve(),Q(s,1,1,()=>{s=null}),Je())},i(r){l||(Y(s),l=!0)},o(r){Q(s),l=!1},d(r){s&&s.d(r),r&&v(e),i=!1,We(n)}}}const Vt="25px FontinBold",Jt="17px FontinRegular",jt=2.6;function as(t,e,l){let i,n,s,{$$slots:r={},$$scope:c}=e,{clickNode:o}=e,{circledNode:a}=e,{selectedJewel:h}=e,{selectedConqueror:_}=e,{seed:d}=e,{highlighted:g=[]}=e,{disabled:u=[]}=e,{highlightJewels:f=!1}=e;const m=Dl(ns,b=>(!g||!g.length)&&!f?0:Math.round(b/40));wl(t,m,b=>l(25,s=b));const S=[427,320,226,227,323,422,329];let y=10,N=0,L=0;const z={},P={},A=(b,ie,le,se=!1,me=!1)=>{let $=se?Jl[ie]:Nt[ie];!$&&se&&($=Nt[ie]);const ve=$.filename;ve in(se?P:z)||((se?P:z)[ve]=new Image,(se?P:z)[ve].src=ve);const _e=$.coords[ie],Ne=_e.w/y*jt,oe=_e.h/y*jt,W=le.x-Ne/2,x=le.y-oe/2;let ue=x;me&&(ue=x-oe/2),b.drawImage((se?P:z)[ve],_e.x,_e.y,_e.w,_e.h,W,ue,Ne,oe),me&&(b.save(),b.translate(W,x),b.rotate(Math.PI),b.drawImage((se?P:z)[ve],_e.x,_e.y,_e.w,_e.h,-Ne,-(oe/2),Ne,-oe),b.restore())},C=(b,ie,le)=>{const se=[];let me="";return b.split(" ").forEach($=>{ie.measureText(me+$).width<le?me+=" "+$:(se.push(me.trim()),me=$)}),me.length>0&&se.push(me.trim()),se};let D={x:Number.MIN_VALUE,y:Number.MIN_VALUE},V="unset",H,K=0,G=0,he=0,pe=0,ae=!1;const Z=b=>{ae=!0,K=b.offsetX,G=b.offsetY,he=N,pe=L,l(21,D={x:b.offsetX,y:b.offsetY}),H&&o(H)},Re=b=>{b.type==="pointerup"&&(ae=!1),l(21,D={x:b.offsetX,y:b.offsetY})},Ie=b=>{ae&&(l(19,N=he-(K-b.offsetX)*y),l(20,L=pe-(G-b.offsetY)*y)),l(21,D={x:b.offsetX,y:b.offsetY})},de=b=>{b.deltaY>0?y<30&&(l(19,N+=b.offsetX),l(20,L+=b.offsetY)):y>3&&(l(19,N-=b.offsetX),l(20,L-=b.offsetY)),l(18,y=Math.min(30,Math.max(3,y+b.deltaY/100))),b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation()};let F=0,ne=0;const re=()=>{l(0,F=window.innerWidth),l(1,ne=window.innerHeight)};let O=!1;return t.$$set=b=>{"clickNode"in b&&l(10,o=b.clickNode),"circledNode"in b&&l(11,a=b.circledNode),"selectedJewel"in b&&l(12,h=b.selectedJewel),"selectedConqueror"in b&&l(13,_=b.selectedConqueror),"seed"in b&&l(14,d=b.seed),"highlighted"in b&&l(15,g=b.highlighted),"disabled"in b&&l(16,u=b.disabled),"highlightJewels"in b&&l(17,f=b.highlightJewels),"$$scope"in b&&l(27,c=b.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&262144&&l(24,i=Vl/y),t.$$.dirty[0]&8650752&&(!O&&Ye&&(l(23,O=!0),l(19,N=Ye.min_x+window.innerWidth/2*y),l(20,L=Ye.min_y+window.innerHeight/2*y)),re()),t.$$.dirty[0]&58718208&&l(3,n=({context:b,width:ie,height:le})=>{const se=window.performance.now();b.clearRect(0,0,ie,le),b.fillStyle="#080c11",b.fillRect(0,0,ie,le);const me={};Object.keys(yt).forEach(oe=>{const W=yt[oe],x=Mt(W.x,W.y,N,L,y),ue=Math.max(...W.orbits);S.indexOf(parseInt(oe))>=0||(ue==1?A(b,"PSGroupBackground1",x,!1):ue==2?A(b,"PSGroupBackground2",x,!1):(ue==3||W.orbits.length>1)&&A(b,"PSGroupBackground3",x,!1,!0))}),Object.keys(et).forEach(oe=>{var fe;const W=et[oe],x=zt(W.orbit,W.orbitIndex),ue=wt(W,N,L,y);(fe=W.out)==null||fe.forEach(Ce=>{if(!et[parseInt(Ce)])return;const ze=Math.min(parseInt(Ce),parseInt(oe)),Ke=Math.max(parseInt(Ce),parseInt(oe)),ce=ze+":"+Ke;if(ce in me)return;me[ce]=!0;const ye=et[parseInt(Ce)];if(!ye||ye.isMastery)return;const Be=zt(ye.orbit,ye.orbitIndex),Oe=wt(ye,N,L,y);if(b.beginPath(),W.group!=ye.group||W.orbit!=ye.orbit)b.moveTo(ue.x,ue.y),b.lineTo(Oe.x,Oe.y);else{let Me=Math.PI/180-Math.PI/180*x,Le=Math.PI/180-Math.PI/180*Be;Me-=Math.PI/2,Le-=Math.PI/2;const rt=Math.abs(Math.max(Me,Le)-Math.min(Me,Le)),ft=rt>Math.PI?Math.max(Me,Le):Math.min(Me,Le),ct=rt>Math.PI?Math.min(Me,Le):Math.max(Me,Le),ot=yt[W.group],at=Mt(ot.x,ot.y,N,L,y);b.arc(at.x,at.y,Ye.constants.orbitRadii[W.orbit]/y+1,ft,ct)}b.lineWidth=6/y,b.strokeStyle="#524518",b.stroke()})});let $;a&&($=wt(et[a],N,L,y),b.strokeStyle="#ad2b2b");let ve=!1,_e;if(Object.keys(et).forEach(oe=>{const W=et[oe],x=wt(W,N,L,y);let ue=0,fe=!1;a&&Et(x,$)<i&&(fe=!0),u.indexOf(W.skill)>=0&&(fe=!1),W.isKeystone?(ue=110,A(b,W.icon,x,fe),fe?A(b,"KeystoneFrameAllocated",x,!1):A(b,"KeystoneFrameUnallocated",x,!1)):W.isNotable?(ue=70,A(b,W.icon,x,fe),fe?A(b,"NotableFrameAllocated",x,!1):A(b,"NotableFrameUnallocated",x,!1)):W.isJewelSocket?(ue=70,W.expansionJewel?A(b,"JewelSocketAltNormal",x,!1):fe?A(b,"JewelFrameAllocated",x,!1):A(b,"JewelFrameUnallocated",x,!1)):W.isMastery?A(b,W.inactiveIcon,x,fe):(ue=50,A(b,W.icon,x,fe),fe?A(b,"PSSkillFrameActive",x,!1):A(b,"PSSkillFrame",x,!1));let Ce=g.indexOf(W.skill)>=0,ze=W.isJewelSocket&&W.skill!=a;(Ce||ze&&!(a&&Et(x,$)<i))&&(b.strokeStyle=f||Ce?`hsl(${s}, 100%, 50%)`:"hsl(50, 0%, 60%)",b.lineWidth=2,b.beginPath(),b.arc(x.x,x.y,(ue+30)/y,0,Math.PI*2),b.stroke()),Et(x,D)<ue/y&&(_e=W,ve=fe)}),l(22,H=_e),a&&(b.strokeStyle="#ad2b2b",b.lineWidth=1,b.beginPath(),b.arc($.x,$.y,i,0,Math.PI*2),b.stroke()),H){let oe=H.name,W=(H.stats||[]).map(ce=>({text:ce,special:!1}));if(!H.isJewelSocket&&ve&&H.skill&&d&&h&&_){const ce=Il.Calculate(te.TreeToPassive[H.skill].Index,d,h,_);ce&&("AlternatePassiveSkill"in ce&&ce.AlternatePassiveSkill&&(W=[],oe=ce.AlternatePassiveSkill.Name,"StatsKeys"in ce.AlternatePassiveSkill&&ce.AlternatePassiveSkill.StatsKeys.forEach((ye,Be)=>{const Oe=te.GetStatByIndex(ye),Me=Ct[Oe.ID]||"";Me&&W.push({text:Lt(Me,ce.StatRolls[Be])||Oe.ID,special:!0})})),ce.AlternatePassiveAdditionInformations&&ce.AlternatePassiveAdditionInformations.forEach(ye=>{"StatsKeys"in ye.AlternatePassiveAddition&&ye.AlternatePassiveAddition.StatsKeys.forEach((Be,Oe)=>{const Me=te.GetStatByIndex(Be),Le=Ct[Me.ID]||"";Le&&W.push({text:Lt(Le,ye.StatRolls[Oe])||Me.ID,special:!0})})}))}b.font=Vt;const x=b.measureText(oe),ue=Math.max(x.width+50,400);b.font=Jt;const fe=[],Ce=30;let ze=85;W&&W.length>0?W.forEach(ce=>{fe.length>0&&(ze+=5),ce.text.split(`
`).forEach(ye=>{fe.length>0&&(ze+=10),C(ye,b,ue-Ce).forEach(Oe=>{fe.push({text:Oe,offset:ze,special:ce.special}),ze+=20})})}):H.isJewelSocket&&(fe.push({text:"Click to select this socket",offset:ze,special:!0}),ze+=20);const Ke=55;b.fillStyle="rgba(41,31,23,0.95)",b.fillRect(D.x,D.y,ue,Ke),b.fillStyle="#f9e6ca",b.font=Vt,b.textAlign="center",b.fillText(oe,D.x+ue/2,D.y+35),b.fillStyle="rgba(0,0,0,0.8)",b.fillRect(D.x,D.y+Ke,ue,ze-Ke),b.font=Jt,b.textAlign="left",fe.forEach(ce=>{ce.special?b.fillStyle="#ff7":b.fillStyle="#88f",b.fillText(ce.text,D.x+Ce/2,D.y+ce.offset)})}H&&H.isJewelSocket?l(2,V="pointer"):l(2,V="unset"),b.fillStyle="#ffffff",b.textAlign="right",b.font="12px FontinSmallCaps";const Ne=window.performance.now();b.fillText(`${(Ne-se).toFixed(1)}ms`,ie-5,17)})},[F,ne,V,n,m,Z,Re,Ie,de,re,o,a,h,_,d,g,u,f,y,N,L,D,H,O,i,s,r,c]}class us extends st{constructor(e){super(),it(this,e,as,os,nt,{clickNode:10,circledNode:11,selectedJewel:12,selectedConqueror:13,seed:14,highlighted:15,disabled:16,highlightJewels:17},null,[-1,-1])}}function qt(t,e,l){const i=t.slice();return i[6]=e[l],i}function Ft(t,e,l){const i=t.slice();return i[9]=e[l],i}function Ut(t){let e,l=ut(t[9],t[6].stats[t[9]])+"",i;return{c(){e=E("li"),i=j(l)},l(n){e=T(n,"LI",{});var s=R(e);i=q(s,l),s.forEach(v)},m(n,s){J(n,e,s),p(e,i)},p(n,s){s&2&&l!==(l=ut(n[9],n[6].stats[n[9]])+"")&&Ae(i,l)},d(n){n&&v(e)}}}function Bt(t){let e,l,i=Ye.nodes[t[6].passive].name+"",n,s,r=t[6].passive+"",c,o,a,h,_,d=Object.keys(t[6].stats),g=[];for(let u=0;u<d.length;u+=1)g[u]=Ut(Ft(t,d,u));return{c(){e=E("div"),l=E("span"),n=j(i),s=j(" ("),c=j(r),o=j(")"),a=U(),h=E("ul");for(let u=0;u<g.length;u+=1)g[u].c();_=U(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=R(e);l=T(f,"SPAN",{});var m=R(l);n=q(m,i),s=q(m," ("),c=q(m,r),o=q(m,")"),m.forEach(v),a=B(f),h=T(f,"UL",{class:!0});var S=R(h);for(let y=0;y<g.length;y+=1)g[y].l(S);S.forEach(v),_=B(f),f.forEach(v),this.h()},h(){k(h,"class","list-disc pl-6 font-bold"),k(e,"class","mt-2")},m(u,f){J(u,e,f),p(e,l),p(l,n),p(l,s),p(l,c),p(l,o),p(e,a),p(e,h);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(h,null);p(e,_)},p(u,f){if(f&2&&i!==(i=Ye.nodes[u[6].passive].name+"")&&Ae(n,i),f&2&&r!==(r=u[6].passive+"")&&Ae(c,r),f&2){d=Object.keys(u[6].stats);let m;for(m=0;m<d.length;m+=1){const S=Ft(u,d,m);g[m]?g[m].p(S,f):(g[m]=Ut(S),g[m].c(),g[m].m(h,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=d.length}},d(u){u&&v(e),lt(g,u)}}}function fs(t){let e,l,i,n,s,r,c,o=t[1].seed+"",a,h,_=t[1].weight+"",d,g,u,f,m,S,y,N,L=t[1].skills,z=[];for(let P=0;P<L.length;P+=1)z[P]=Bt(qt(t,L,P));return{c(){e=E("div"),l=E("div"),i=E("button"),n=j("Trade"),s=U(),r=E("div"),c=j("Seed "),a=j(o),h=j(" (weight "),d=j(_),g=j(")"),u=U(),f=E("button"),m=j("Trade"),S=U();for(let P=0;P<z.length;P+=1)z[P].c();this.h()},l(P){e=T(P,"DIV",{class:!0});var A=R(e);l=T(A,"DIV",{class:!0});var C=R(l);i=T(C,"BUTTON",{class:!0});var D=R(i);n=q(D,"Trade"),D.forEach(v),s=B(C),r=T(C,"DIV",{class:!0});var V=R(r);c=q(V,"Seed "),a=q(V,o),h=q(V," (weight "),d=q(V,_),g=q(V,")"),V.forEach(v),u=B(C),f=T(C,"BUTTON",{class:!0});var H=R(f);m=q(H,"Trade"),H.forEach(v),C.forEach(v),S=B(A);for(let K=0;K<z.length;K+=1)z[K].l(A);A.forEach(v),this.h()},h(){k(i,"class","px-3 invisible"),k(r,"class","font-bold text-orange-500 text-center"),k(f,"class","px-3 bg-blue-500/40 rounded"),k(l,"class","flex flex-row justify-between"),k(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(P,A){J(P,e,A),p(e,l),p(l,i),p(i,n),p(l,s),p(l,r),p(r,c),p(r,a),p(r,h),p(r,d),p(r,g),p(l,u),p(l,f),p(f,m),p(e,S);for(let C=0;C<z.length;C+=1)z[C]&&z[C].m(e,null);y||(N=[M(f,"click",t[4]),M(e,"click",t[5])],y=!0)},p(P,[A]){if(A&2&&o!==(o=P[1].seed+"")&&Ae(a,o),A&2&&_!==(_=P[1].weight+"")&&Ae(d,_),A&2){L=P[1].skills;let C;for(C=0;C<L.length;C+=1){const D=qt(P,L,C);z[C]?z[C].p(D,A):(z[C]=Bt(D),z[C].c(),z[C].m(e,null))}for(;C<z.length;C+=1)z[C].d(1);z.length=L.length}},i:Ge,o:Ge,d(P){P&&v(e),lt(z,P),y=!1,We(N)}}}function cs(t,e,l){let{highlight:i}=e,{set:n}=e,{jewel:s}=e,{conqueror:r}=e;const c=()=>kl(s,r,[n]),o=()=>i(n.seed,n.skills.map(a=>a.passive));return t.$$set=a=>{"highlight"in a&&l(0,i=a.highlight),"set"in a&&l(1,n=a.set),"jewel"in a&&l(2,s=a.jewel),"conqueror"in a&&l(3,r=a.conqueror)},[i,n,s,r,c,o]}class Al extends st{constructor(e){super(),it(this,e,cs,fs,nt,{highlight:0,set:1,jewel:2,conqueror:3})}}const St={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Xe={HORIZONTAL:"horizontal",VERTICAL:"vertical"},mt={OBSERVED:0,REQUESTED:1},hs={[Xe.VERTICAL]:"top",[Xe.HORIZONTAL]:"left"},Ht={[Xe.VERTICAL]:"scrollTop",[Xe.HORIZONTAL]:"scrollLeft"};class ds{constructor({itemSize:e,itemCount:l,estimatedItemSize:i}){this.itemSize=e,this.itemCount=l,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:l,estimatedItemSize:i}){l!=null&&(this.itemCount=l),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:l}=this;return typeof l=="function"?l(e):Array.isArray(l)?l[e]:l}computeTotalSizeAndPositionData(){let e=0;for(let l=0;l<this.itemCount;l++){const i=this.getSize(l),n=e;e+=i,this.itemSizeAndPositionData[l]={offset:n,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const l=this.getSizeAndPositionOfLastMeasuredItem();let i=l.offset+l.size;for(let n=this.lastMeasuredIndex+1;n<=e;n++){const s=this.getSize(n);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${n} of value ${s}`);this.itemSizeAndPositionData[n]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=St.START,containerSize:l,currentOffset:i,targetIndex:n}){if(l<=0)return 0;const s=this.getSizeAndPositionForIndex(n),r=s.offset,c=r-l+s.size;let o;switch(e){case St.END:o=c;break;case St.CENTER:o=r-(l-s.size)/2;break;case St.START:o=r;break;default:o=Math.max(c,Math.min(r,i))}const a=this.getTotalSize();return Math.max(0,Math.min(a-l,o))}getVisibleRange({containerSize:e=0,offset:l,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=l+e;let r=this.findNearestItem(l);if(r===void 0)throw Error(`Invalid offset ${l} specified`);const c=this.getSizeAndPositionForIndex(r);l=c.offset+c.size;let o=r;for(;l<s&&o<this.itemCount-1;)o++,l+=this.getSizeAndPositionForIndex(o).size;return i&&(r=Math.max(0,r-i),o=Math.min(o+i,this.itemCount-1)),{start:r,stop:o}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const l=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return l.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:l,offset:i}){let n=0,s=0;for(;e<=l;){if(n=e+Math.floor((l-e)/2),s=this.getSizeAndPositionForIndex(n).offset,s===i)return n;s<i?e=n+1:s>i&&(l=n-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:l}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<l;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:l})}}const ms=t=>({}),Yt=t=>({});function Kt(t,e,l){const i=t.slice();return i[37]=e[l],i}const _s=t=>({style:t[0]&4,index:t[0]&4}),Xt=t=>({style:t[37].style,index:t[37].index}),gs=t=>({}),Gt=t=>({});function Wt(t,e){let l,i;const n=e[21].item,s=_t(n,e,e[20],Xt);return{key:t,first:null,c(){l=ke(),s&&s.c(),this.h()},l(r){l=ke(),s&&s.l(r),this.h()},h(){this.first=l},m(r,c){J(r,l,c),s&&s.m(r,c),i=!0},p(r,c){e=r,s&&s.p&&(!i||c[0]&1048580)&&gt(s,n,e,e[20],i?vt(n,e[20],c,_s):pt(e[20]),Xt)},i(r){i||(Y(s,r),i=!0)},o(r){Q(s,r),i=!1},d(r){r&&v(l),s&&s.d(r)}}}function ps(t){let e,l,i,n=[],s=new Map,r,c;const o=t[21].header,a=_t(o,t,t[20],Gt);let h=t[2];const _=u=>u[0]?u[0](u[37].index):u[37].index;for(let u=0;u<h.length;u+=1){let f=Kt(t,h,u),m=_(f);s.set(m,n[u]=Wt(m,f))}const d=t[21].footer,g=_t(d,t,t[20],Yt);return{c(){e=E("div"),a&&a.c(),l=U(),i=E("div");for(let u=0;u<n.length;u+=1)n[u].c();r=U(),g&&g.c(),this.h()},l(u){e=T(u,"DIV",{class:!0,style:!0});var f=R(e);a&&a.l(f),l=B(f),i=T(f,"DIV",{class:!0,style:!0});var m=R(i);for(let S=0;S<n.length;S+=1)n[S].l(m);m.forEach(v),r=B(f),g&&g.l(f),f.forEach(v),this.h()},h(){k(i,"class","virtual-list-inner svelte-1d4hv8l"),k(i,"style",t[4]),k(e,"class","virtual-list-wrapper svelte-1d4hv8l"),k(e,"style",t[3])},m(u,f){J(u,e,f),a&&a.m(e,null),p(e,l),p(e,i);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(i,null);p(e,r),g&&g.m(e,null),t[22](e),c=!0},p(u,f){a&&a.p&&(!c||f[0]&1048576)&&gt(a,o,u,u[20],c?vt(o,u[20],f,gs):pt(u[20]),Gt),f[0]&1048581&&(h=u[2],Ve(),n=Ll(n,f,_,1,u,h,s,i,Nl,Wt,null,Kt),Je()),(!c||f[0]&16)&&k(i,"style",u[4]),g&&g.p&&(!c||f[0]&1048576)&&gt(g,d,u,u[20],c?vt(d,u[20],f,ms):pt(u[20]),Yt),(!c||f[0]&8)&&k(e,"style",u[3])},i(u){if(!c){Y(a,u);for(let f=0;f<h.length;f+=1)Y(n[f]);Y(g,u),c=!0}},o(u){Q(a,u);for(let f=0;f<n.length;f+=1)Q(n[f]);Q(g,u),c=!1},d(u){u&&v(e),a&&a.d(u);for(let f=0;f<n.length;f+=1)n[f].d();g&&g.d(u),t[22](null)}}}const vs=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function bs(t,e,l){let{$$slots:i={},$$scope:n}=e,{height:s}=e,{width:r="100%"}=e,{itemCount:c}=e,{itemSize:o}=e,{estimatedItemSize:a=null}=e,{stickyIndices:h=null}=e,{getKey:_=null}=e,{scrollDirection:d=Xe.VERTICAL}=e,{scrollOffset:g=null}=e,{scrollToIndex:u=null}=e,{scrollToAlignment:f=null}=e,{scrollToBehaviour:m="instant"}=e,{overscanCount:S=3}=e;const y=bl(),N=new ds({itemCount:c,itemSize:o,estimatedItemSize:F()});let L=!1,z,P=[],A={offset:g||u!=null&&P.length&&Re(u)||0,scrollChangeReason:mt.REQUESTED},C=A,D={scrollToIndex:u,scrollToAlignment:f,scrollOffset:g,itemCount:c,itemSize:o,estimatedItemSize:a},V={},H="",K="";pe(),vl(()=>{l(18,L=!0),z.addEventListener("scroll",Ie,vs),g!=null?ae(g):u!=null&&ae(Re(u))}),At(()=>{L&&z.removeEventListener("scroll",Ie)});function G(){if(!L)return;const O=D.scrollToIndex!==u||D.scrollToAlignment!==f,b=D.itemCount!==c||D.itemSize!==o||D.estimatedItemSize!==a;b&&(N.updateConfig({itemSize:o,itemCount:c,estimatedItemSize:F()}),Z()),D.scrollOffset!==g?l(19,A={offset:g||0,scrollChangeReason:mt.REQUESTED}):typeof u=="number"&&(O||b)&&l(19,A={offset:Re(u,f,c),scrollChangeReason:mt.REQUESTED}),D={scrollToIndex:u,scrollToAlignment:f,scrollOffset:g,itemCount:c,itemSize:o,estimatedItemSize:a}}function he(){if(!L)return;const{offset:O,scrollChangeReason:b}=A;(C.offset!==O||C.scrollChangeReason!==b)&&pe(),C.offset!==O&&b===mt.REQUESTED&&ae(O),C=A}function pe(){const{offset:O}=A,{start:b,stop:ie}=N.getVisibleRange({containerSize:d===Xe.VERTICAL?s:r,offset:O,overscanCount:S});let le=[];const se=N.getTotalSize();d===Xe.VERTICAL?(l(3,H=`height:${s}px;width:${r};`),l(4,K=`flex-direction:column;height:${se}px;`)):(l(3,H=`height:${s};width:${r}px`),l(4,K=`min-height:100%;width:${se}px;`));const me=h!=null&&h.length!==0;if(me)for(let $=0;$<h.length;$++){const ve=h[$];le.push({index:ve,style:ne(ve,!0)})}if(b!==void 0&&ie!==void 0){for(let $=b;$<=ie;$++)me&&h.includes($)||le.push({index:$,style:ne($,!1)});y("itemsUpdated",{start:b,end:ie})}l(2,P=le)}function ae(O){"scroll"in z?z.scroll({[hs[d]]:O,behavior:m}):l(1,z[Ht[d]]=O,z)}function Z(O=0){V={},N.resetItem(O),pe()}function Re(O,b=f,ie=c){return(O<0||O>=ie)&&(O=0),N.getUpdatedOffsetForIndex({align:b,containerSize:d===Xe.VERTICAL?s:r,currentOffset:A.offset||0,targetIndex:O})}function Ie(O){const b=de();b<0||A.offset===b||O.target!==z||(l(19,A={offset:b,scrollChangeReason:mt.OBSERVED}),y("afterScroll",{offset:b,event:O}))}function de(){return z[Ht[d]]}function F(){return a||typeof o=="number"&&o||50}function ne(O,b){if(V[O])return V[O];const{size:ie,offset:le}=N.getSizeAndPositionForIndex(O);let se;return d===Xe.VERTICAL?(se=`left:0;width:100%;height:${ie}px;`,b?se+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${le}px;margin-bottom:${-(le+ie)}px;`:se+=`position:absolute;top:${le}px;`):(se=`top:0;width:${ie}px;`,b?se+=`position:sticky;z-index:1;left:0;margin-left:${le}px;margin-right:${-(le+ie)}px;`:se+=`position:absolute;height:100%;left:${le}px;`),V[O]=se}function re(O){tt[O?"unshift":"push"](()=>{z=O,l(1,z)})}return t.$$set=O=>{"height"in O&&l(5,s=O.height),"width"in O&&l(6,r=O.width),"itemCount"in O&&l(7,c=O.itemCount),"itemSize"in O&&l(8,o=O.itemSize),"estimatedItemSize"in O&&l(9,a=O.estimatedItemSize),"stickyIndices"in O&&l(10,h=O.stickyIndices),"getKey"in O&&l(0,_=O.getKey),"scrollDirection"in O&&l(11,d=O.scrollDirection),"scrollOffset"in O&&l(12,g=O.scrollOffset),"scrollToIndex"in O&&l(13,u=O.scrollToIndex),"scrollToAlignment"in O&&l(14,f=O.scrollToAlignment),"scrollToBehaviour"in O&&l(15,m=O.scrollToBehaviour),"overscanCount"in O&&l(16,S=O.overscanCount),"$$scope"in O&&l(20,n=O.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&G(),t.$$.dirty[0]&524288&&he(),t.$$.dirty[0]&263264&&L&&Z(0)},[_,z,P,H,K,s,r,c,o,a,h,d,g,u,f,m,S,Z,L,A,n,i,re]}class Rl extends st{constructor(e){super(),it(this,e,bs,ps,nt,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function Qt(t,e,l){const i=t.slice();return i[9]=e[l],i}function ws(t){let e,l,i;return l=new Rl({props:{height:"auto",overscanCount:15,itemCount:t[0].raw.length,itemSize:t[0].raw.map(t[6]),$$slots:{item:[ks,({style:n,index:s})=>({12:n,13:s}),({style:n,index:s})=>(n?4096:0)|(s?8192:0)]},$$scope:{ctx:t}}}),{c(){e=E("div"),je(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var s=R(e);qe(l.$$.fragment,s),s.forEach(v),this.h()},h(){k(e,"class","mt-4 flex flex-col overflow-auto")},m(n,s){J(n,e,s),Fe(l,e,null),i=!0},p(n,s){const r={};s&1&&(r.itemCount=n[0].raw.length),s&1&&(r.itemSize=n[0].raw.map(n[6])),s&28699&&(r.$$scope={dirty:s,ctx:n}),l.$set(r)},i(n){i||(Y(l.$$.fragment,n),i=!0)},o(n){Q(l.$$.fragment,n),i=!1},d(n){n&&v(e),Ue(l)}}}function Ss(t){let e,l,i=Object.keys(t[0].grouped).map(t[7]).sort($t).reverse(),n=[];for(let r=0;r<i.length;r+=1)n[r]=xt(Qt(t,i,r));const s=r=>Q(n[r],1,1,()=>{n[r]=null});return{c(){e=E("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=T(r,"DIV",{class:!0});var c=R(e);for(let o=0;o<n.length;o+=1)n[o].l(c);c.forEach(v),this.h()},h(){k(e,"class","flex flex-col overflow-auto")},m(r,c){J(r,e,c);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);l=!0},p(r,c){if(c&12411){i=Object.keys(r[0].grouped).map(r[7]).sort($t).reverse();let o;for(o=0;o<i.length;o+=1){const a=Qt(r,i,o);n[o]?(n[o].p(a,c),Y(n[o],1)):(n[o]=xt(a),n[o].c(),Y(n[o],1),n[o].m(e,null))}for(Ve(),o=i.length;o<n.length;o+=1)s(o);Je()}},i(r){if(!l){for(let c=0;c<i.length;c+=1)Y(n[c]);l=!0}},o(r){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)Q(n[c]);l=!1},d(r){r&&v(e),lt(n,r)}}}function ks(t){let e,l,i,n;return l=new Al({props:{set:t[0].raw[t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=E("div"),je(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{slot:!0,style:!0});var r=R(e);qe(l.$$.fragment,r),r.forEach(v),this.h()},h(){k(e,"slot","item"),k(e,"style",i=t[12])},m(s,r){J(s,e,r),Fe(l,e,null),n=!0},p(s,r){const c={};r&8193&&(c.set=s[0].raw[s[13]]),r&2&&(c.highlight=s[1]),r&8&&(c.jewel=s[3]),r&16&&(c.conqueror=s[4]),l.$set(c),(!n||r&4096&&i!==(i=s[12]))&&k(e,"style",i)},i(s){n||(Y(l.$$.fragment,s),n=!0)},o(s){Q(l.$$.fragment,s),n=!1},d(s){s&&v(e),Ue(l)}}}function Zt(t){let e,l,i,n;return l=new Rl({props:{height:"auto",overscanCount:10,itemCount:t[0].grouped[t[9]].length,itemSize:t[0].grouped[t[9]].map(t[6]),$$slots:{item:[Is,({style:s,index:r})=>({12:s,13:r}),({style:s,index:r})=>(s?4096:0)|(r?8192:0)]},$$scope:{ctx:t}}}),{c(){e=E("div"),je(l.$$.fragment),i=U(),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=R(e);qe(l.$$.fragment,r),i=B(r),r.forEach(v),this.h()},h(){k(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(s,r){J(s,e,r),Fe(l,e,null),p(e,i),n=!0},p(s,r){const c={};r&1&&(c.itemCount=s[0].grouped[s[9]].length),r&1&&(c.itemSize=s[0].grouped[s[9]].map(s[6])),r&28699&&(c.$$scope={dirty:r,ctx:s}),l.$set(c)},i(s){n||(Y(l.$$.fragment,s),n=!0)},o(s){Q(l.$$.fragment,s),n=!1},d(s){s&&v(e),Ue(l)}}}function Is(t){let e,l,i,n;return l=new Al({props:{set:t[0].grouped[t[9]][t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=E("div"),je(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{slot:!0,style:!0});var r=R(e);qe(l.$$.fragment,r),r.forEach(v),this.h()},h(){k(e,"slot","item"),k(e,"style",i=t[12])},m(s,r){J(s,e,r),Fe(l,e,null),n=!0},p(s,r){const c={};r&8193&&(c.set=s[0].grouped[s[9]][s[13]]),r&2&&(c.highlight=s[1]),r&8&&(c.jewel=s[3]),r&16&&(c.conqueror=s[4]),l.$set(c),(!n||r&4096&&i!==(i=s[12]))&&k(e,"style",i)},i(s){n||(Y(l.$$.fragment,s),n=!0)},o(s){Q(l.$$.fragment,s),n=!1},d(s){s&&v(e),Ue(l)}}}function xt(t){let e,l,i=t[9]+"",n,s,r=t[9]>1?"es":"",c,o,a=t[0].grouped[t[9]].length+"",h,_,d,g,u=t[5]===t[9]?"^":"V",f,m,S,y,N,L;function z(){return t[8](t[9])}let P=t[5]===t[9]&&Zt(t);return{c(){e=E("button"),l=E("span"),n=j(i),s=j(" Match"),c=j(r),o=j(" ["),h=j(a),_=j("]"),d=U(),g=E("span"),f=j(u),m=U(),P&&P.c(),S=ke(),this.h()},l(A){e=T(A,"BUTTON",{class:!0});var C=R(e);l=T(C,"SPAN",{});var D=R(l);n=q(D,i),s=q(D," Match"),c=q(D,r),o=q(D," ["),h=q(D,a),_=q(D,"]"),D.forEach(v),d=B(C),g=T(C,"SPAN",{});var V=R(g);f=q(V,u),V.forEach(v),C.forEach(v),m=B(A),P&&P.l(A),S=ke(),this.h()},h(){k(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(A,C){J(A,e,C),p(e,l),p(l,n),p(l,s),p(l,c),p(l,o),p(l,h),p(l,_),p(e,d),p(e,g),p(g,f),J(A,m,C),P&&P.m(A,C),J(A,S,C),y=!0,N||(L=M(e,"click",z),N=!0)},p(A,C){t=A,(!y||C&1)&&i!==(i=t[9]+"")&&Ae(n,i),(!y||C&1)&&r!==(r=t[9]>1?"es":"")&&Ae(c,r),(!y||C&1)&&a!==(a=t[0].grouped[t[9]].length+"")&&Ae(h,a),(!y||C&33)&&u!==(u=t[5]===t[9]?"^":"V")&&Ae(f,u),t[5]===t[9]?P?(P.p(t,C),C&33&&Y(P,1)):(P=Zt(t),P.c(),Y(P,1),P.m(S.parentNode,S)):P&&(Ve(),Q(P,1,1,()=>{P=null}),Je())},i(A){y||(Y(P),y=!0)},o(A){Q(P),y=!1},d(A){A&&v(e),A&&v(m),P&&P.d(A),A&&v(S),N=!1,L()}}}function ys(t){let e,l,i,n;const s=[Ss,ws],r=[];function c(o,a){return o[2]?0:1}return e=c(t),l=r[e]=s[e](t),{c(){l.c(),i=ke()},l(o){l.l(o),i=ke()},m(o,a){r[e].m(o,a),J(o,i,a),n=!0},p(o,[a]){let h=e;e=c(o),e===h?r[e].p(o,a):(Ve(),Q(r[h],1,1,()=>{r[h]=null}),Je(),l=r[e],l?l.p(o,a):(l=r[e]=s[e](o),l.c()),Y(l,1),l.m(i.parentNode,i))},i(o){n||(Y(l),n=!0)},o(o){Q(l),n=!1},d(o){r[e].d(o),o&&v(i)}}}const $t=(t,e)=>t-e;function Es(t,e,l){let{searchResults:i}=e,{highlight:n}=e,{groupResults:s=!0}=e,{jewel:r}=e,{conqueror:c}=e;const o=d=>8+48+d.skills.reduce((g,u)=>g+32+Object.keys(u.stats).length*24,0);let a="";const h=d=>parseInt(d),_=d=>l(5,a=a===d?"":d);return t.$$set=d=>{"searchResults"in d&&l(0,i=d.searchResults),"highlight"in d&&l(1,n=d.highlight),"groupResults"in d&&l(2,s=d.groupResults),"jewel"in d&&l(3,r=d.jewel),"conqueror"in d&&l(4,c=d.conqueror)},[i,n,s,r,c,a,o,h,_]}class Ts extends st{constructor(e){super(),it(this,e,Es,ys,nt,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}const xe={25:1,26:1,42:1,49:1,56:1,63:1,70:3,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,5808:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1293:3,1294:3,1361:1,2029:5,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};const{window:As}=Sl;function el(t,e,l){const i=t.slice();return i[77]=e[l],i[78]=e,i[79]=l,i}function tl(t,e,l){const i=t.slice();return i[70]=e[l],i}function ll(t,e,l){const i=t.slice();return i[70]=e[l],i}function sl(t,e,l){const i=t.slice();return i[70]=e[l],i}function Rs(t){let e,l,i,n,s,r,c,o;return{c(){e=E("button"),l=E("div"),i=U(),n=E("div"),s=U(),r=E("div"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var h=R(e);l=T(h,"DIV",{}),R(l).forEach(v),i=B(h),n=T(h,"DIV",{}),R(n).forEach(v),s=B(h),r=T(h,"DIV",{}),R(r).forEach(v),h.forEach(v),this.h()},h(){k(e,"class","burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5")},m(a,h){J(a,e,h),p(e,l),p(e,i),p(e,n),p(e,s),p(e,r),c||(o=M(e,"click",t[65]),c=!0)},p:Ge,i:Ge,o:Ge,d(a){a&&v(e),c=!1,o()}}}function Ps(t){let e,l,i,n,s,r,c,o,a,h,_,d,g=t[14]?"Results":"Timeless Jewel",u,f,m,S,y,N,L,z=t[18]&&il(t),P=!t[14]&&rl(t),A=t[18]&&t[14]&&pl(t);return{c(){e=E("div"),l=E("div"),i=E("div"),n=E("div"),s=E("button"),r=E("div"),c=U(),o=E("div"),a=U(),h=E("div"),_=U(),d=E("h3"),u=j(g),f=U(),z&&z.c(),m=U(),P&&P.c(),S=U(),A&&A.c(),this.h()},l(C){e=T(C,"DIV",{class:!0});var D=R(e);l=T(D,"DIV",{class:!0});var V=R(l);i=T(V,"DIV",{class:!0});var H=R(i);n=T(H,"DIV",{class:!0});var K=R(n);s=T(K,"BUTTON",{class:!0});var G=R(s);r=T(G,"DIV",{}),R(r).forEach(v),c=B(G),o=T(G,"DIV",{}),R(o).forEach(v),a=B(G),h=T(G,"DIV",{}),R(h).forEach(v),G.forEach(v),_=B(K),d=T(K,"H3",{class:!0});var he=R(d);u=q(he,g),he.forEach(v),K.forEach(v),f=B(H),z&&z.l(H),H.forEach(v),m=B(V),P&&P.l(V),S=B(V),A&&A.l(V),V.forEach(v),D.forEach(v),this.h()},h(){k(s,"class","burger-menu mr-3"),k(d,"class","flex-grow"),k(n,"class","flex flex-row items-center"),k(i,"class","flex flex-row justify-between mb-2"),k(l,"class","p-4 max-h-screen flex flex-col"),k(e,"class","w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(C,D){J(C,e,D),p(e,l),p(l,i),p(i,n),p(n,s),p(s,r),p(s,c),p(s,o),p(s,a),p(s,h),p(n,_),p(n,d),p(d,u),p(i,f),z&&z.m(i,null),p(l,m),P&&P.m(l,null),p(l,S),A&&A.m(l,null),y=!0,N||(L=M(s,"click",t[44]),N=!0)},p(C,D){(!y||D[0]&16384)&&g!==(g=C[14]?"Results":"Timeless Jewel")&&Ae(u,g),C[18]?z?z.p(C,D):(z=il(C),z.c(),z.m(i,null)):z&&(z.d(1),z=null),C[14]?P&&(Ve(),Q(P,1,1,()=>{P=null}),Je()):P?(P.p(C,D),D[0]&16384&&Y(P,1)):(P=rl(C),P.c(),Y(P,1),P.m(l,S)),C[18]&&C[14]?A?(A.p(C,D),D[0]&278528&&Y(A,1)):(A=pl(C),A.c(),Y(A,1),A.m(l,null)):A&&(Ve(),Q(A,1,1,()=>{A=null}),Je())},i(C){y||(Y(P),Y(A),y=!0)},o(C){Q(P),Q(A),y=!1},d(C){C&&v(e),z&&z.d(),P&&P.d(),A&&A.d(),N=!1,L()}}}function il(t){let e,l,i,n=t[14]?"Config":"Results",s,r,c,o=t[14]&&nl(t);return{c(){e=E("div"),o&&o.c(),l=U(),i=E("button"),s=j(n),this.h()},l(a){e=T(a,"DIV",{class:!0});var h=R(e);o&&o.l(h),l=B(h),i=T(h,"BUTTON",{class:!0});var _=R(i);s=q(_,n),_.forEach(v),h.forEach(v),this.h()},h(){k(i,"class","bg-neutral-100/20 px-4 p-1 rounded"),k(e,"class","flex flex-row")},m(a,h){J(a,e,h),o&&o.m(e,null),p(e,l),p(e,i),p(i,s),r||(c=M(i,"click",t[47]),r=!0)},p(a,h){a[14]?o?o.p(a,h):(o=nl(a),o.c(),o.m(e,l)):o&&(o.d(1),o=null),h[0]&16384&&n!==(n=a[14]?"Config":"Results")&&Ae(s,n)},d(a){a&&v(e),o&&o.d(),r=!1,c()}}}function nl(t){let e,l,i,n,s,r,c,o,a;return{c(){e=E("button"),l=j("Trade"),n=U(),s=E("button"),r=j("Grouped"),this.h()},l(h){e=T(h,"BUTTON",{class:!0});var _=R(e);l=q(_,"Trade"),_.forEach(v),n=B(h),s=T(h,"BUTTON",{class:!0});var d=R(s);r=q(d,"Grouped"),d.forEach(v),this.h()},h(){k(e,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=i=!t[18],k(s,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-9h6fz6"),s.disabled=c=!t[18],we(s,"grouped",t[5])},m(h,_){J(h,e,_),p(e,l),J(h,n,_),J(h,s,_),p(s,r),o||(a=[M(e,"click",t[45]),M(s,"click",t[46])],o=!0)},p(h,_){_[0]&262144&&i!==(i=!h[18])&&(e.disabled=i),_[0]&262144&&c!==(c=!h[18])&&(s.disabled=c),_[0]&32&&we(s,"grouped",h[5])},d(h){h&&v(e),h&&v(n),h&&v(s),o=!1,We(a)}}}function rl(t){let e,l,i,n,s;function r(a){t[48](a)}let c={items:t[25]};t[0]!==void 0&&(c.value=t[0]),e=new kt({props:c}),tt.push(()=>Rt(e,"value",r)),e.$on("change",t[31]);let o=t[0]&&ol(t);return{c(){je(e.$$.fragment),i=U(),o&&o.c(),n=ke()},l(a){qe(e.$$.fragment,a),i=B(a),o&&o.l(a),n=ke()},m(a,h){Fe(e,a,h),J(a,i,h),o&&o.m(a,h),J(a,n,h),s=!0},p(a,h){const _={};!l&&h[0]&1&&(l=!0,_.value=a[0],Pt(()=>l=!1)),e.$set(_),a[0]?o?(o.p(a,h),h[0]&1&&Y(o,1)):(o=ol(a),o.c(),Y(o,1),o.m(n.parentNode,n)):o&&(Ve(),Q(o,1,1,()=>{o=null}),Je())},i(a){s||(Y(e.$$.fragment,a),Y(o),s=!0)},o(a){Q(e.$$.fragment,a),Q(o),s=!1},d(a){Ue(e,a),a&&v(i),o&&o.d(a),a&&v(n)}}}function ol(t){let e,l,i,n,s,r,c,o=t[1]&&Object.keys(te.TimelessJewelConquerors[t[0].value]).indexOf(t[1].value)>=0,a,h;function _(u){t[49](u)}let d={items:t[24]};t[1]!==void 0&&(d.value=t[1]),s=new kt({props:d}),tt.push(()=>Rt(s,"value",_)),s.$on("change",t[26]);let g=o&&al(t);return{c(){e=E("div"),l=E("h3"),i=j("Conqueror"),n=U(),je(s.$$.fragment),c=U(),g&&g.c(),a=ke(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=R(e);l=T(f,"H3",{class:!0});var m=R(l);i=q(m,"Conqueror"),m.forEach(v),n=B(f),qe(s.$$.fragment,f),f.forEach(v),c=B(u),g&&g.l(u),a=ke(),this.h()},h(){k(l,"class","mb-2"),k(e,"class","mt-4")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(e,n),Fe(s,e,null),J(u,c,f),g&&g.m(u,f),J(u,a,f),h=!0},p(u,f){const m={};f[0]&16777216&&(m.items=u[24]),!r&&f[0]&2&&(r=!0,m.value=u[1],Pt(()=>r=!1)),s.$set(m),f[0]&3&&(o=u[1]&&Object.keys(te.TimelessJewelConquerors[u[0].value]).indexOf(u[1].value)>=0),o?g?(g.p(u,f),f[0]&3&&Y(g,1)):(g=al(u),g.c(),Y(g,1),g.m(a.parentNode,a)):g&&(Ve(),Q(g,1,1,()=>{g=null}),Je())},i(u){h||(Y(s.$$.fragment,u),Y(g),h=!0)},o(u){Q(s.$$.fragment,u),Q(g),h=!1},d(u){u&&v(e),Ue(s),u&&v(c),g&&g.d(u),u&&v(a)}}}function al(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u;const f=[zs,Ms],m=[];function S(N,L){return N[10]==="seed"?0:N[10]==="stats"?1:-1}~(o=S(t))&&(a=m[o]=f[o](t));let y=!t[3]&&gl();return{c(){e=E("div"),l=E("button"),i=j("Enter Seed"),n=U(),s=E("button"),r=j("Select Stats"),c=U(),a&&a.c(),h=U(),y&&y.c(),_=ke(),this.h()},l(N){e=T(N,"DIV",{class:!0});var L=R(e);l=T(L,"BUTTON",{class:!0});var z=R(l);i=q(z,"Enter Seed"),z.forEach(v),n=B(L),s=T(L,"BUTTON",{class:!0});var P=R(s);r=q(P,"Select Stats"),P.forEach(v),L.forEach(v),c=B(N),a&&a.l(N),h=B(N),y&&y.l(N),_=ke(),this.h()},h(){k(l,"class","selection-button svelte-9h6fz6"),we(l,"selected",t[10]==="seed"),k(s,"class","selection-button svelte-9h6fz6"),we(s,"selected",t[10]==="stats"),k(e,"class","mt-4 w-full flex flex-row")},m(N,L){J(N,e,L),p(e,l),p(l,i),p(e,n),p(e,s),p(s,r),J(N,c,L),~o&&m[o].m(N,L),J(N,h,L),y&&y.m(N,L),J(N,_,L),d=!0,g||(u=[M(l,"click",t[50]),M(s,"click",t[51])],g=!0)},p(N,L){(!d||L[0]&1024)&&we(l,"selected",N[10]==="seed"),(!d||L[0]&1024)&&we(s,"selected",N[10]==="stats");let z=o;o=S(N),o===z?~o&&m[o].p(N,L):(a&&(Ve(),Q(m[z],1,1,()=>{m[z]=null}),Je()),~o?(a=m[o],a?a.p(N,L):(a=m[o]=f[o](N),a.c()),Y(a,1),a.m(h.parentNode,h)):a=null),N[3]?y&&(y.d(1),y=null):y||(y=gl(),y.c(),y.m(_.parentNode,_))},i(N){d||(Y(a),d=!0)},o(N){Q(a),d=!1},d(N){N&&v(e),N&&v(c),~o&&m[o].d(N),N&&v(h),y&&y.d(N),N&&v(_),g=!1,We(u)}}}function Ms(t){let e,l,i,n,s,r,c=Object.keys(t[4]).length>0,o,a,h={items:t[22]};s=new kt({props:h}),t[59](s),s.$on("change",t[29]);let _=c&&ul(t);return{c(){e=E("div"),l=E("h3"),i=j("Add Stat"),n=U(),je(s.$$.fragment),r=U(),_&&_.c(),o=ke(),this.h()},l(d){e=T(d,"DIV",{class:!0});var g=R(e);l=T(g,"H3",{class:!0});var u=R(l);i=q(u,"Add Stat"),u.forEach(v),n=B(g),qe(s.$$.fragment,g),g.forEach(v),r=B(d),_&&_.l(d),o=ke(),this.h()},h(){k(l,"class","mb-2"),k(e,"class","mt-4")},m(d,g){J(d,e,g),p(e,l),p(l,i),p(e,n),Fe(s,e,null),J(d,r,g),_&&_.m(d,g),J(d,o,g),a=!0},p(d,g){const u={};g[0]&4194304&&(u.items=d[22]),s.$set(u),g[0]&16&&(c=Object.keys(d[4]).length>0),c?_?_.p(d,g):(_=ul(d),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},i(d){a||(Y(s.$$.fragment,d),a=!0)},o(d){Q(s.$$.fragment,d),a=!1},d(d){d&&v(e),t[59](null),Ue(s),d&&v(r),_&&_.d(d),d&&v(o)}}}function zs(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u=(t[2]<te.TimelessJewelSeedRanges[t[0].value].Min||t[2]>te.TimelessJewelSeedRanges[t[0].value].Max)&&cl(t),f=t[2]>=te.TimelessJewelSeedRanges[t[0].value].Min&&t[2]<=te.TimelessJewelSeedRanges[t[0].value].Max&&hl(t);return{c(){e=E("div"),l=E("h3"),i=j("Seed"),n=U(),s=E("input"),o=U(),u&&u.c(),a=U(),f&&f.c(),h=ke(),this.h()},l(m){e=T(m,"DIV",{class:!0});var S=R(e);l=T(S,"H3",{class:!0});var y=R(l);i=q(y,"Seed"),y.forEach(v),n=B(S),s=T(S,"INPUT",{type:!0,min:!0,max:!0}),o=B(S),u&&u.l(S),S.forEach(v),a=B(m),f&&f.l(m),h=ke(),this.h()},h(){k(l,"class","mb-2"),k(s,"type","number"),k(s,"min",r=te.TimelessJewelSeedRanges[t[0].value].Min),k(s,"max",c=te.TimelessJewelSeedRanges[t[0].value].Max),k(e,"class","mt-4")},m(m,S){J(m,e,S),p(e,l),p(l,i),p(e,n),p(e,s),Ze(s,t[2]),p(e,o),u&&u.m(e,null),J(m,a,S),f&&f.m(m,S),J(m,h,S),_=!0,d||(g=[M(s,"input",t[52]),M(s,"blur",t[26])],d=!0)},p(m,S){(!_||S[0]&1&&r!==(r=te.TimelessJewelSeedRanges[m[0].value].Min))&&k(s,"min",r),(!_||S[0]&1&&c!==(c=te.TimelessJewelSeedRanges[m[0].value].Max))&&k(s,"max",c),S[0]&4&&Qe(s.value)!==m[2]&&Ze(s,m[2]),m[2]<te.TimelessJewelSeedRanges[m[0].value].Min||m[2]>te.TimelessJewelSeedRanges[m[0].value].Max?u?u.p(m,S):(u=cl(m),u.c(),u.m(e,null)):u&&(u.d(1),u=null),m[2]>=te.TimelessJewelSeedRanges[m[0].value].Min&&m[2]<=te.TimelessJewelSeedRanges[m[0].value].Max?f?(f.p(m,S),S[0]&5&&Y(f,1)):(f=hl(m),f.c(),Y(f,1),f.m(h.parentNode,h)):f&&(Ve(),Q(f,1,1,()=>{f=null}),Je())},i(m){_||(Y(f),_=!0)},o(m){Q(f),_=!1},d(m){m&&v(e),u&&u.d(),m&&v(a),f&&f.d(m),m&&v(h),d=!1,We(g)}}}function ul(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u,f,m,S,y,N,L,z,P,A,C,D,V,H,K,G,he,pe,ae=Object.keys(t[4]),Z=[];for(let F=0;F<ae.length;F+=1)Z[F]=fl(el(t,ae,F));function Re(F,ne){return F[16]?Ls:Cs}let Ie=Re(t),de=Ie(t);return{c(){e=E("div");for(let F=0;F<Z.length;F+=1)Z[F].c();l=U(),i=E("div"),n=E("div"),s=E("div"),r=j("Min Total Weight:"),c=U(),o=E("input"),a=U(),h=E("div"),_=E("div"),d=E("button"),g=j("Select All"),f=U(),m=E("button"),S=j("Notables"),N=U(),L=E("button"),z=j("Passives"),A=U(),C=E("button"),D=j("Deselect"),H=U(),K=E("div"),G=E("button"),de.c(),this.h()},l(F){e=T(F,"DIV",{class:!0});var ne=R(e);for(let oe=0;oe<Z.length;oe+=1)Z[oe].l(ne);ne.forEach(v),l=B(F),i=T(F,"DIV",{class:!0});var re=R(i);n=T(re,"DIV",{class:!0});var O=R(n);s=T(O,"DIV",{class:!0});var b=R(s);r=q(b,"Min Total Weight:"),b.forEach(v),c=B(O),o=T(O,"INPUT",{type:!0,min:!0}),O.forEach(v),re.forEach(v),a=B(F),h=T(F,"DIV",{class:!0});var ie=R(h);_=T(ie,"DIV",{class:!0});var le=R(_);d=T(le,"BUTTON",{class:!0});var se=R(d);g=q(se,"Select All"),se.forEach(v),f=B(le),m=T(le,"BUTTON",{class:!0});var me=R(m);S=q(me,"Notables"),me.forEach(v),N=B(le),L=T(le,"BUTTON",{class:!0});var $=R(L);z=q($,"Passives"),$.forEach(v),A=B(le),C=T(le,"BUTTON",{class:!0});var ve=R(C);D=q(ve,"Deselect"),ve.forEach(v),le.forEach(v),H=B(ie),K=T(ie,"DIV",{class:!0});var _e=R(K);G=T(_e,"BUTTON",{class:!0});var Ne=R(G);de.l(Ne),Ne.forEach(v),_e.forEach(v),ie.forEach(v),this.h()},h(){k(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),k(s,"class","mr-2 min-w-fit"),k(o,"type","number"),k(o,"min","0"),k(n,"class","flex flex-row items-center"),k(i,"class","flex flex-col mt-2"),k(d,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),d.disabled=u=t[16]||t[12].size==0,k(m,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),m.disabled=y=t[16]||t[12].size==0,k(L,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),L.disabled=P=t[16]||t[12].size==0,k(C,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),C.disabled=V=t[16]||t[12].size>=t[9].length,k(_,"class","flex flex-row"),k(G,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),G.disabled=t[16],k(K,"class","flex flex-row mt-2"),k(h,"class","flex flex-col mt-4")},m(F,ne){J(F,e,ne);for(let re=0;re<Z.length;re+=1)Z[re]&&Z[re].m(e,null);J(F,l,ne),J(F,i,ne),p(i,n),p(n,s),p(s,r),p(n,c),p(n,o),Ze(o,t[15]),J(F,a,ne),J(F,h,ne),p(h,_),p(_,d),p(d,g),p(_,f),p(_,m),p(m,S),p(_,N),p(_,L),p(L,z),p(_,A),p(_,C),p(C,D),p(h,H),p(h,K),p(K,G),de.m(G,null),he||(pe=[M(o,"input",t[63]),M(d,"click",t[34]),M(m,"click",t[35]),M(L,"click",t[36]),M(C,"click",t[37]),M(G,"click",t[64])],he=!0)},p(F,ne){if(ne[0]&1073741840){ae=Object.keys(F[4]);let re;for(re=0;re<ae.length;re+=1){const O=el(F,ae,re);Z[re]?Z[re].p(O,ne):(Z[re]=fl(O),Z[re].c(),Z[re].m(e,null))}for(;re<Z.length;re+=1)Z[re].d(1);Z.length=ae.length}ne[0]&32768&&Qe(o.value)!==F[15]&&Ze(o,F[15]),ne[0]&69632&&u!==(u=F[16]||F[12].size==0)&&(d.disabled=u),ne[0]&69632&&y!==(y=F[16]||F[12].size==0)&&(m.disabled=y),ne[0]&69632&&P!==(P=F[16]||F[12].size==0)&&(L.disabled=P),ne[0]&70144&&V!==(V=F[16]||F[12].size>=F[9].length)&&(C.disabled=V),Ie===(Ie=Re(F))&&de?de.p(F,ne):(de.d(1),de=Ie(F),de&&(de.c(),de.m(G,null))),ne[0]&65536&&(G.disabled=F[16])},d(F){F&&v(e),lt(Z,F),F&&v(l),F&&v(i),F&&v(a),F&&v(h),de.d(),he=!1,We(pe)}}}function fl(t){let e,l,i,n,s,r,c=ut(t[4][t[77]].id)+"",o,a,h,_,d,g,u,f,m,S,y,N,L,z,P,A,C;function D(){return t[60](t[77])}function V(){t[61].call(f,t[77])}function H(){t[62].call(z,t[77])}return{c(){e=E("div"),l=E("div"),i=E("button"),n=j("-"),s=U(),r=E("span"),o=j(c),a=U(),h=E("div"),_=E("div"),d=E("div"),g=j("Min:"),u=U(),f=E("input"),m=U(),S=E("div"),y=E("div"),N=j("Weight:"),L=U(),z=E("input"),P=U(),this.h()},l(K){e=T(K,"DIV",{class:!0});var G=R(e);l=T(G,"DIV",{});var he=R(l);i=T(he,"BUTTON",{class:!0});var pe=R(i);n=q(pe,"-"),pe.forEach(v),s=B(he),r=T(he,"SPAN",{});var ae=R(r);o=q(ae,c),ae.forEach(v),he.forEach(v),a=B(G),h=T(G,"DIV",{class:!0});var Z=R(h);_=T(Z,"DIV",{class:!0});var Re=R(_);d=T(Re,"DIV",{class:!0});var Ie=R(d);g=q(Ie,"Min:"),Ie.forEach(v),u=B(Re),f=T(Re,"INPUT",{type:!0,min:!0}),Re.forEach(v),m=B(Z),S=T(Z,"DIV",{class:!0});var de=R(S);y=T(de,"DIV",{class:!0});var F=R(y);N=q(F,"Weight:"),F.forEach(v),L=B(de),z=T(de,"INPUT",{type:!0,min:!0}),de.forEach(v),Z.forEach(v),P=B(G),G.forEach(v),this.h()},h(){k(i,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),k(d,"class","mr-2"),k(f,"type","number"),k(f,"min","0"),k(_,"class","mr-4 flex flex-row items-center"),k(y,"class","mr-2"),k(z,"type","number"),k(z,"min","0"),k(S,"class","flex flex-row items-center"),k(h,"class","mt-2 flex flex-row"),k(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(K,G){J(K,e,G),p(e,l),p(l,i),p(i,n),p(l,s),p(l,r),p(r,o),p(e,a),p(e,h),p(h,_),p(_,d),p(d,g),p(_,u),p(_,f),Ze(f,t[4][t[77]].min),p(h,m),p(h,S),p(S,y),p(y,N),p(S,L),p(S,z),Ze(z,t[4][t[77]].weight),p(e,P),A||(C=[M(i,"click",D),M(f,"input",V),M(z,"input",H)],A=!0)},p(K,G){t=K,G[0]&16&&c!==(c=ut(t[4][t[77]].id)+"")&&Ae(o,c),G[0]&16&&Qe(f.value)!==t[4][t[77]].min&&Ze(f,t[4][t[77]].min),G[0]&16&&Qe(z.value)!==t[4][t[77]].weight&&Ze(z,t[4][t[77]].weight)},d(K){K&&v(e),A=!1,We(C)}}}function Cs(t){let e;return{c(){e=j("Search")},l(l){e=q(l,"Search")},m(l,i){J(l,e,i)},p:Ge,d(l){l&&v(e)}}}function Ls(t){let e,l,i=te.TimelessJewelSeedRanges[t[0].value].Max+"",n;return{c(){e=j(t[17]),l=j(" / "),n=j(i)},l(s){e=q(s,t[17]),l=q(s," / "),n=q(s,i)},m(s,r){J(s,e,r),J(s,l,r),J(s,n,r)},p(s,r){r[0]&131072&&Ae(e,s[17]),r[0]&1&&i!==(i=te.TimelessJewelSeedRanges[s[0].value].Max+"")&&Ae(n,i)},d(s){s&&v(e),s&&v(l),s&&v(n)}}}function cl(t){let e,l,i=te.TimelessJewelSeedRanges[t[0].value].Min+"",n,s,r=te.TimelessJewelSeedRanges[t[0].value].Max+"",c;return{c(){e=E("div"),l=j("Seed must be between "),n=j(i),s=j(`
                      and `),c=j(r),this.h()},l(o){e=T(o,"DIV",{class:!0});var a=R(e);l=q(a,"Seed must be between "),n=q(a,i),s=q(a,`
                      and `),c=q(a,r),a.forEach(v),this.h()},h(){k(e,"class","mt-2")},m(o,a){J(o,e,a),p(e,l),p(e,n),p(e,s),p(e,c)},p(o,a){a[0]&1&&i!==(i=te.TimelessJewelSeedRanges[o[0].value].Min+"")&&Ae(n,i),a[0]&1&&r!==(r=te.TimelessJewelSeedRanges[o[0].value].Max+"")&&Ae(c,r)},d(o){o&&v(e)}}}function hl(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u,f,m,S,y,N,L;function z(V){t[53](V)}let P={items:t[40]};t[6]!==void 0&&(P.value=t[6]),r=new kt({props:P}),tt.push(()=>Rt(r,"value",z));function A(V,H){return V[8]?Ns:Os}let C=A(t),D=C(t);return{c(){e=E("div"),l=E("div"),i=E("h3"),n=j("Sort Order"),s=U(),je(r.$$.fragment),o=U(),a=E("div"),h=E("button"),_=j("Colors"),d=U(),g=E("div"),u=E("button"),f=j("Split"),m=U(),D.c(),S=ke(),this.h()},l(V){e=T(V,"DIV",{class:!0});var H=R(e);l=T(H,"DIV",{class:!0});var K=R(l);i=T(K,"H3",{class:!0});var G=R(i);n=q(G,"Sort Order"),G.forEach(v),s=B(K),qe(r.$$.fragment,K),K.forEach(v),o=B(H),a=T(H,"DIV",{class:!0});var he=R(a);h=T(he,"BUTTON",{class:!0});var pe=R(h);_=q(pe,"Colors"),pe.forEach(v),he.forEach(v),d=B(H),g=T(H,"DIV",{class:!0});var ae=R(g);u=T(ae,"BUTTON",{class:!0});var Z=R(u);f=q(Z,"Split"),Z.forEach(v),ae.forEach(v),H.forEach(v),m=B(V),D.l(V),S=ke(),this.h()},h(){k(i,"class","mb-2"),k(l,"class","flex-grow"),k(h,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),we(h,"selected",t[7]),k(a,"class","ml-2"),k(u,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),we(u,"selected",t[8]),k(g,"class","ml-2"),k(e,"class","flex flex-row mt-4 items-end")},m(V,H){J(V,e,H),p(e,l),p(l,i),p(i,n),p(l,s),Fe(r,l,null),p(e,o),p(e,a),p(a,h),p(h,_),p(e,d),p(e,g),p(g,u),p(u,f),J(V,m,H),D.m(V,H),J(V,S,H),y=!0,N||(L=[M(h,"click",t[54]),M(u,"click",t[55])],N=!0)},p(V,H){const K={};!c&&H[0]&64&&(c=!0,K.value=V[6],Pt(()=>c=!1)),r.$set(K),(!y||H[0]&128)&&we(h,"selected",V[7]),(!y||H[0]&256)&&we(u,"selected",V[8]),C===(C=A(V))&&D?D.p(V,H):(D.d(1),D=C(V),D&&(D.c(),D.m(S.parentNode,S)))},i(V){y||(Y(r.$$.fragment,V),y=!0)},o(V){Q(r.$$.fragment,V),y=!1},d(V){V&&v(e),Ue(r),V&&v(m),D.d(V),V&&v(S),N=!1,We(L)}}}function Ns(t){let e,l,i,n,s,r,c,o,a,h,_=t[39](t[38](t[23],t[7],"notables"),t[6].value),d=[];for(let f=0;f<_.length;f+=1)d[f]=dl(ll(t,_,f));let g=t[39](t[38](t[23],t[7],"passives"),t[6].value),u=[];for(let f=0;f<g.length;f+=1)u[f]=ml(tl(t,g,f));return{c(){e=E("div"),l=E("h3"),i=j("Notables"),n=U(),s=E("ul");for(let f=0;f<d.length;f+=1)d[f].c();r=U(),c=E("h3"),o=j("Smalls"),a=U(),h=E("ul");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var m=R(e);l=T(m,"H3",{});var S=R(l);i=q(S,"Notables"),S.forEach(v),n=B(m),s=T(m,"UL",{class:!0});var y=R(s);for(let z=0;z<d.length;z+=1)d[z].l(y);y.forEach(v),r=B(m),c=T(m,"H3",{class:!0});var N=R(c);o=q(N,"Smalls"),N.forEach(v),a=B(m),h=T(m,"UL",{class:!0});var L=R(h);for(let z=0;z<u.length;z+=1)u[z].l(L);L.forEach(v),m.forEach(v),this.h()},h(){k(s,"class","mt-1 svelte-9h6fz6"),we(s,"rainbow",t[7]),k(c,"class","mt-2"),k(h,"class","mt-1 svelte-9h6fz6"),we(h,"rainbow",t[7]),k(e,"class","overflow-auto mt-4")},m(f,m){J(f,e,m),p(e,l),p(l,i),p(e,n),p(e,s);for(let S=0;S<d.length;S+=1)d[S]&&d[S].m(s,null);p(e,r),p(e,c),p(c,o),p(e,a),p(e,h);for(let S=0;S<u.length;S+=1)u[S]&&u[S].m(h,null)},p(f,m){if(m[0]&8388804|m[1]&388){_=f[39](f[38](f[23],f[7],"notables"),f[6].value);let S;for(S=0;S<_.length;S+=1){const y=ll(f,_,S);d[S]?d[S].p(y,m):(d[S]=dl(y),d[S].c(),d[S].m(s,null))}for(;S<d.length;S+=1)d[S].d(1);d.length=_.length}if(m[0]&128&&we(s,"rainbow",f[7]),m[0]&8388804|m[1]&388){g=f[39](f[38](f[23],f[7],"passives"),f[6].value);let S;for(S=0;S<g.length;S+=1){const y=tl(f,g,S);u[S]?u[S].p(y,m):(u[S]=ml(y),u[S].c(),u[S].m(h,null))}for(;S<u.length;S+=1)u[S].d(1);u.length=g.length}m[0]&128&&we(h,"rainbow",f[7])},d(f){f&&v(e),lt(d,f),lt(u,f)}}}function Os(t){let e,l=t[39](t[38](t[23],t[7],"all"),t[6].value),i=[];for(let n=0;n<l.length;n+=1)i[n]=_l(sl(t,l,n));return{c(){e=E("ul");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=T(n,"UL",{class:!0});var s=R(e);for(let r=0;r<i.length;r+=1)i[r].l(s);s.forEach(v),this.h()},h(){k(e,"class","mt-4 overflow-auto svelte-9h6fz6"),we(e,"rainbow",t[7])},m(n,s){J(n,e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(n,s){if(s[0]&8388804|s[1]&388){l=n[39](n[38](n[23],n[7],"all"),n[6].value);let r;for(r=0;r<l.length;r+=1){const c=sl(n,l,r);i[r]?i[r].p(c,s):(i[r]=_l(c),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=l.length}s[0]&128&&we(e,"rainbow",n[7])},d(n){n&&v(e),lt(i,n)}}}function dl(t){let e,l,i,n=t[70].passives.length+"",s,r,c,o,a=t[70].stat+"",h,_,d;function g(){return t[57](t[70])}return{c(){e=E("li"),l=E("span"),i=j("("),s=j(n),r=j(")"),c=U(),o=E("span"),h=U(),this.h()},l(u){e=T(u,"LI",{class:!0});var f=R(e);l=T(f,"SPAN",{class:!0});var m=R(l);i=q(m,"("),s=q(m,n),r=q(m,")"),m.forEach(v),c=B(f),o=T(f,"SPAN",{class:!0});var S=R(o);S.forEach(v),h=B(f),f.forEach(v),this.h()},h(){k(l,"class","font-bold"),we(l,"text-white",(xe[t[70].id]||0)<3),k(o,"class","text-white"),k(e,"class","cursor-pointer")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,o),o.innerHTML=a,p(e,h),_||(d=M(e,"click",g),_=!0)},p(u,f){t=u,f[0]&8388800&&n!==(n=t[70].passives.length+"")&&Ae(s,n),f[0]&8388800|f[1]&384&&we(l,"text-white",(xe[t[70].id]||0)<3),f[0]&8388800&&a!==(a=t[70].stat+"")&&(o.innerHTML=a)},d(u){u&&v(e),_=!1,d()}}}function ml(t){let e,l,i,n=t[70].passives.length+"",s,r,c,o,a=t[70].stat+"",h,_,d;function g(){return t[58](t[70])}return{c(){e=E("li"),l=E("span"),i=j("("),s=j(n),r=j(")"),c=U(),o=E("span"),h=U(),this.h()},l(u){e=T(u,"LI",{class:!0});var f=R(e);l=T(f,"SPAN",{class:!0});var m=R(l);i=q(m,"("),s=q(m,n),r=q(m,")"),m.forEach(v),c=B(f),o=T(f,"SPAN",{class:!0});var S=R(o);S.forEach(v),h=B(f),f.forEach(v),this.h()},h(){k(l,"class","font-bold"),we(l,"text-white",(xe[t[70].id]||0)<3),k(o,"class","text-white"),k(e,"class","cursor-pointer")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,o),o.innerHTML=a,p(e,h),_||(d=M(e,"click",g),_=!0)},p(u,f){t=u,f[0]&8388800&&n!==(n=t[70].passives.length+"")&&Ae(s,n),f[0]&8388800|f[1]&384&&we(l,"text-white",(xe[t[70].id]||0)<3),f[0]&8388800&&a!==(a=t[70].stat+"")&&(o.innerHTML=a)},d(u){u&&v(e),_=!1,d()}}}function _l(t){let e,l,i,n=t[70].passives.length+"",s,r,c,o,a=t[70].stat+"",h,_,d;function g(){return t[56](t[70])}return{c(){e=E("li"),l=E("span"),i=j("("),s=j(n),r=j(")"),c=U(),o=E("span"),h=U(),this.h()},l(u){e=T(u,"LI",{class:!0});var f=R(e);l=T(f,"SPAN",{class:!0});var m=R(l);i=q(m,"("),s=q(m,n),r=q(m,")"),m.forEach(v),c=B(f),o=T(f,"SPAN",{class:!0});var S=R(o);S.forEach(v),h=B(f),f.forEach(v),this.h()},h(){k(l,"class","font-bold"),we(l,"text-white",(xe[t[70].id]||0)<3),k(o,"class","text-white"),k(e,"class","cursor-pointer")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,o),o.innerHTML=a,p(e,h),_||(d=M(e,"click",g),_=!0)},p(u,f){t=u,f[0]&8388800&&n!==(n=t[70].passives.length+"")&&Ae(s,n),f[0]&8388800|f[1]&384&&we(l,"text-white",(xe[t[70].id]||0)<3),f[0]&8388800&&a!==(a=t[70].stat+"")&&(o.innerHTML=a)},d(u){u&&v(e),_=!1,d()}}}function gl(t){let e,l;return{c(){e=E("h2"),l=j("Click on a jewel socket"),this.h()},l(i){e=T(i,"H2",{class:!0});var n=R(e);l=q(n,"Click on a jewel socket"),n.forEach(v),this.h()},h(){k(e,"class","mt-4")},m(i,n){J(i,e,n),p(e,l)},d(i){i&&v(e)}}}function pl(t){let e,l;return e=new Ts({props:{searchResults:t[18],groupResults:t[5],highlight:t[33],jewel:t[19],conqueror:t[20]}}),{c(){je(e.$$.fragment)},l(i){qe(e.$$.fragment,i)},m(i,n){Fe(e,i,n),l=!0},p(i,n){const s={};n[0]&262144&&(s.searchResults=i[18]),n[0]&32&&(s.groupResults=i[5]),n[0]&524288&&(s.jewel=i[19]),n[0]&1048576&&(s.conqueror=i[20]),e.$set(s)},i(i){l||(Y(e.$$.fragment,i),l=!0)},o(i){Q(e.$$.fragment,i),l=!1},d(i){Ue(e,i)}}}function Ds(t){let e,l,i,n,s,r,c;const o=[Ps,Rs],a=[];function h(_,d){return _[21]?1:0}return e=h(t),l=a[e]=o[e](t),{c(){l.c(),i=U(),n=E("div"),s=E("a"),r=j("Source (Github)"),this.h()},l(_){l.l(_),i=B(_),n=T(_,"DIV",{class:!0});var d=R(n);s=T(d,"A",{href:!0,target:!0,rel:!0});var g=R(s);r=q(g,"Source (Github)"),g.forEach(v),d.forEach(v),this.h()},h(){k(s,"href","https://github.com/Vilsol/timeless-jewels"),k(s,"target","_blank"),k(s,"rel","noopener"),k(n,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(_,d){a[e].m(_,d),J(_,i,d),J(_,n,d),p(n,s),p(s,r),c=!0},p(_,d){let g=e;e=h(_),e===g?a[e].p(_,d):(Ve(),Q(a[g],1,1,()=>{a[g]=null}),Je(),l=a[e],l?l.p(_,d):(l=a[e]=o[e](_),l.c()),Y(l,1),l.m(i.parentNode,i))},i(_){c||(Y(l),c=!0)},o(_){Q(l),c=!1},d(_){a[e].d(_),_&&v(i),_&&v(n)}}}function Vs(t){var s,r;let e,l,i,n;return e=new us({props:{clickNode:t[28],circledNode:t[3],selectedJewel:(s=t[0])==null?void 0:s.value,selectedConqueror:(r=t[1])==null?void 0:r.value,highlighted:t[11],seed:t[2],highlightJewels:!t[3],disabled:[...t[12]],$$slots:{default:[Ds]},$$scope:{ctx:t}}}),{c(){je(e.$$.fragment)},l(c){qe(e.$$.fragment,c)},m(c,o){Fe(e,c,o),l=!0,i||(n=M(As,"paste",t[41]),i=!0)},p(c,o){var h,_;const a={};o[0]&8&&(a.circledNode=c[3]),o[0]&1&&(a.selectedJewel=(h=c[0])==null?void 0:h.value),o[0]&2&&(a.selectedConqueror=(_=c[1])==null?void 0:_.value),o[0]&2048&&(a.highlighted=c[11]),o[0]&4&&(a.seed=c[2]),o[0]&8&&(a.highlightJewels=!c[3]),o[0]&4096&&(a.disabled=[...c[12]]),o[0]&33552383|o[2]&262144&&(a.$$scope={dirty:o,ctx:c}),e.$set(a)},i(c){l||(Y(e.$$.fragment,c),l=!0)},o(c){Q(e.$$.fragment,c),l=!1},d(c){Ue(e,c),i=!1,n()}}}function Js(t,e,l){let i,n,s,r,c,o;wl(t,Bl,I=>l(66,o=I));const a=o.url.searchParams,h=Object.keys(te.TimelessJewels).map(I=>({value:parseInt(I),label:te.TimelessJewels[I]}));let _=a.has("jewel")?h.find(I=>I.value==a.get("jewel")):void 0,d=a.has("conqueror")?{value:a.get("conqueror"),label:a.get("conqueror")}:void 0,g=a.has("seed")?parseInt(a.get("seed")):0,u=a.has("location")?parseInt(a.get("location")):void 0,f={};a.has("stat")&&a.getAll("stat").forEach(I=>{const ee=parseInt(I);l(4,f[ee]={weight:1,min:0,id:ee},f)});let m=a.has("mode")?a.get("mode"):"";const S=()=>{const I=new URL(window.location.origin+window.location.pathname);_&&I.searchParams.append("jewel",_.value.toString()),d&&I.searchParams.append("conqueror",d.value),g&&I.searchParams.append("seed",g.toString()),u&&I.searchParams.append("location",u.toString()),m&&I.searchParams.append("mode",m),Object.keys(f).forEach(ee=>{I.searchParams.append("stat",ee.toString())}),Ul(I.toString())},y=I=>{l(10,m=I),S()};let N=[],L=new Set;const z=I=>{I.isJewelSocket?(u&&u!=I.skill&&l(11,N=[]),l(3,u=I.skill),S()):I.isMastery||(L.has(I.skill)?L.delete(I.skill):L.add(I.skill),l(12,L))},P=JSON.parse(te.PossibleStats);let A;const C=I=>{l(4,f[I.detail.value]={weight:1,min:0,id:I.detail.value},f),l(4,f),A.handleClear(),S()},D=I=>{delete f[I],l(4,f),S()},V=()=>{l(4,f={}),l(1,d=void 0),l(2,g=void 0),S()};let H=!1,K=0,G=!1,he=0,pe,ae=1,Z="";const Re=()=>{if(!u)return;l(19,ae=_.value),l(20,Z=d.value),l(16,G=!0),l(18,pe=void 0);const I={jewel:_.value,conqueror:d.value,nodes:n.filter(ee=>!L.has(ee.skill)).map(ee=>te.TreeToPassive[ee.skill]).filter(ee=>!!ee).map(ee=>ee.Index),stats:Object.keys(f).map(ee=>f[ee]),minTotalWeight:K};ql.search(I,Fl(ee=>l(17,he=ee))).then(ee=>{l(18,pe=ee),l(16,G=!1),l(14,H=!0)})},Ie=(I,ee)=>{l(2,g=I),l(11,N=ee),S()},de=()=>{L.clear(),l(12,L)},F=()=>{n.forEach(I=>{I.isNotable&&L.delete(I.skill)}),l(12,L)},ne=()=>{n.forEach(I=>{I.isNotable||L.delete(I.skill)}),l(12,L)},re=()=>{n.filter(I=>!I.isJewelSocket&&!I.isMastery).forEach(I=>L.add(I.skill)),l(12,L)};let O=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true";const b={physical:"#e1b900",cast:"#d800ff",spell:"#d800ff",fire:"#FF0000",burning:"#FF0000",ignite:"#FF0000",cold:"#5599FF",chill:"#5599FF",lightning:"#FFF000",shock:"#FFF000",minion:"#ffc4e4",ailment:"#00e120",attack:"#ff9000",life:"#ff00cc",chaos:"#a944ff",poison:"#a944ff",unique:"#af6025",intelligence:"#ccff00",dexterity:"#ccff00",strength:"#ccff00",critical:"#a8ff00",speed:"#00ffc0"},ie=I=>(Object.keys(b).forEach(ee=>{const be=b[ee];I=I.replace(new RegExp(`(${ee}(?:$|\\s|.*?\\b))|((?:^|\\s)${ee}(?:.*?\\b))`,"gi"),`<span style='color: ${be}; font-weight: bold'>$1$2</span>`)}),I),le=(I,ee,be)=>{const Se={};return I.forEach(ge=>{Ye.nodes[ge.node].isKeystone||be!=="all"&&(be==="notables"&&!Ye.nodes[ge.node].isNotable||be==="passives"&&Ye.nodes[ge.node].isNotable)||(ge.result.AlternatePassiveSkill&&ge.result.AlternatePassiveSkill.StatsKeys&&ge.result.AlternatePassiveSkill.StatsKeys.forEach(Pe=>{Se[Pe]=[...Se[Pe]||[],ge.node]}),ge.result.AlternatePassiveAdditionInformations&&ge.result.AlternatePassiveAdditionInformations.forEach(Pe=>{Pe.AlternatePassiveAddition.StatsKeys&&Pe.AlternatePassiveAddition.StatsKeys.forEach(De=>{Se[De]=[...Se[De]||[],ge.node]})}))}),Object.keys(Se).map(ge=>{const Pe=ut(parseInt(ge));return{stat:ee?ie(Pe):Pe,rawStat:Pe,id:ge,passives:Se[ge]}})},se=(I,ee)=>{switch(ee){case"alphabet":return I.sort((be,Se)=>be.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(Se.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return I.sort((be,Se)=>Se.passives.length-be.passives.length);case"rarity":return I.sort((be,Se)=>P[_.value][be.id]-P[_.value][Se.id]);case"value":return I.sort((be,Se)=>{const ge=xe[be.id]||0,Pe=xe[Se.id]||0;return ge!=Pe?Pe-ge:P[_.value][be.id]-P[_.value][Se.id]})}return I},me=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let $=me.find(I=>I.value===(localStorage.getItem("sortOrder")||"count")),ve=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true",_e=localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true";const Ne=I=>{if(I.type!=="paste")return;const be=(I.clipboardData||window.clipboardData).getData("text").split(`
`).reduce((De,$e)=>($e.trim().length>0&&De.push($e.trim()),De),[]);if(be.length<14)return;const Se=h.find(De=>De.label===be[2]);if(!Se)return;let ge,Pe;for(let De=10;De<be.length;De++)if(Pe=Object.keys(te.TimelessJewelConquerors[Se.value]).find($e=>be[De].indexOf($e)>=0),Pe){const $e=/(\d+)/.exec(be[De]);if($e.length===0)continue;ge=parseInt($e[1]);break}!Pe||!ge||(l(14,H=!1),l(10,m="seed"),l(2,g=ge),l(0,_=Se),l(1,d={label:Pe,value:Pe}),S())};let oe=!1;const W=()=>l(21,oe=!0),x=()=>kl(ae,Z,pe.raw),ue=()=>l(5,O=!O),fe=()=>l(14,H=!H);function Ce(I){_=I,l(0,_)}function ze(I){d=I,l(1,d)}const Ke=()=>y("seed"),ce=()=>y("stats");function ye(){g=Qe(this.value),l(2,g)}function Be(I){$=I,l(6,$)}const Oe=()=>l(7,ve=!ve),Me=()=>l(8,_e=!_e),Le=I=>Ie(g,I.passives),rt=I=>Ie(g,I.passives),ft=I=>Ie(g,I.passives);function ct(I){tt[I?"unshift":"push"](()=>{A=I,l(13,A)})}const ot=I=>D(f[I].id);function at(I){f[I].min=Qe(this.value),l(4,f)}function It(I){f[I].weight=Qe(this.value),l(4,f)}function w(){K=Qe(this.value),l(15,K)}const ht=()=>Re(),dt=()=>l(21,oe=!1);return t.$$.update=()=>{t.$$.dirty[0]&1&&l(24,i=_?Object.keys(te.TimelessJewelConquerors[_.value]).map(I=>({value:I,label:I})):[]),t.$$.dirty[0]&8&&l(9,n=u?jl(Ye.nodes[u]).filter(I=>!I.isJewelSocket&&!I.isMastery):[]),t.$$.dirty[0]&519&&l(23,s=!g||!_||!d||Object.keys(te.TimelessJewelConquerors[_.value]).indexOf(d.value)<0?[]:n.filter(I=>!!te.TreeToPassive[I.skill]).map(I=>({node:I.skill,result:Il.Calculate(te.TreeToPassive[I.skill].Index,g,_.value,d.value)}))),t.$$.dirty[0]&1&&l(43,r=_?Object.keys(P[_.value]):[]),t.$$.dirty[0]&16|t.$$.dirty[1]&4096&&l(22,c=r.map(I=>{const ee=parseInt(I);return{label:ut(ee),value:ee}}).filter(I=>!(I.value in f))),t.$$.dirty[0]&32&&localStorage.setItem("groupResults",O?"true":"false"),t.$$.dirty[0]&64&&localStorage.setItem("sortOrder",$.value),t.$$.dirty[0]&128&&localStorage.setItem("colored",ve?"true":"false"),t.$$.dirty[0]&256&&localStorage.setItem("split",_e?"true":"false")},[_,d,g,u,f,O,$,ve,_e,n,m,N,L,A,H,K,G,he,pe,ae,Z,oe,c,s,i,h,S,y,z,C,D,V,Re,Ie,de,F,ne,re,le,se,me,Ne,b,r,W,x,ue,fe,Ce,ze,Ke,ce,ye,Be,Oe,Me,Le,rt,ft,ct,ot,at,It,w,ht,dt]}class Ks extends st{constructor(e){super(),it(this,e,Js,Vs,nt,{colorKeys:42},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[42]}}export{Ks as default};
